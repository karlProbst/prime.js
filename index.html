<!DOCTYPE html>
<html>

<head>
    
</head>

<body>
    <h1>Calculadora Primos.js</h1>
    <h2>insira um número:</h2>

    <input type="text" id="numberbox">

    <button type="button" id="button">Calcular</button>
    <br>
    Dividir apenas por números primos?<input type="checkbox" id="optionIsPrime">
    <br>
    Mostrar todos os primos?<input type="checkbox" id="optionAllPrime">
    <br>
    <textarea type="textarea" id="outputbox" cols=40 rows=75></textarea>
    
    <p id="output"></p>


    <script>
        var outputStr = "";
        var optionIsPrime = false;
        function isPrime(n){
            for(let i = 2;i<n-1;i++)
                if(n%i==0){  
                    return false;         
                };
            return true;
        };
        function trace(str){
            //console.log(str);
            outputStr+=str+"\n";
        };
        function doIt(n){
            let resto = 0;
            if(n>9999){
                trace("número grande demais!");
                return;
                
            }
            for(let i = 2;i<n-1;i++){
                
                if(isPrime(i) || optionIsPrime){
                    resto = n%i;
                    trace(n+"/"+i+" = "+parseInt(n/i)+" , resto= "+resto);
                };
                if(resto==0){
                    if(!optionAllPrime){
                        trace("resto zero, "+n+" não é primo");
                        return;
                    }
                    //print é primo!
                }
            }
            trace(n+" é primo!")
        }
        //mostrar resultado
        function myDisplayer() {
            document.getElementById("outputbox").innerHTML = outputStr;
        };
        //html elements
        const numberid = document.getElementById("numberbox");
        const buttonid = document.getElementById("button");
        const inputid = document.getElementById("inputbox");
        const outputid = document.getElementById("outputbox");
        const optionIsPrimeid = document.getElementById("optionIsPrime");
        const optionAllPrimeid = document.getElementById("optionAllPrime");

        
        buttonid.addEventListener("click", () => {
            optionIsPrime = optionIsPrimeid.checked;
            optionAllPrime = optionAllPrimeid.checked;
            //limpar output
            outputStr="";
            doIt(numberid.value);myDisplayer();
        });
        //numberid.addEventListener("keyup", () => { changeNum(numberid.value,); });
        //numberid.addEventListener("keyup", () => { doIt(inputid.value); });
    </script>
</body>

</html>